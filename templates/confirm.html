{% extends 'base.html' %}
{% block title %}- gestisci prenotazione{% endblock %}
{% block content %}
    {% if action == "confirm" %}
        <section class="structure extra-space section">
            <div class="container">
                <div class="row gy-4">
                    <h2 class="mb-0 text-center"><i class="bi bi-calendar2-week"></i> Conferma prenotazione</h2>
                    <hr/>
                    <div class="col-12">
                        <div class="item light-grey white position-relative border-top-0">
                            <h2 class="text-center"><strong>Prenotazione</strong></h2>
                            <h6 class="text-center mb-4 mt-0">stai prenotando questo corso
                            </h6>
                            <h2 class="text-center mb-0 mt-0">
                                <i class="bi {{ course.logo }}"></i> {{ course.name }}
                            </h2>
                            <h5 class="text-center m-2">
                                {{ schedule.start_date.strftime("%d/%m/%Y") }}
                                ore {{ schedule.start_time.strftime("%H:%M") }}
                            </h5>
                            <h5 class="text-center mt-3 pb-3 color-red">
                                Vuoi CONFERMARE la tua prenotazione?
                            </h5>
                            <form method="POST" class="text-center">
                                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                                <input type="hidden" name="confirm" value="yes">
                                <button type="submit" class="btn btn-success mb-2">Conferma la prenotazione
                                </button>
                                <a href="{{ url_for('courses') }}" class="btn btn-secondary mb-2">Annulla</a>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    {% endif %}

    {% if action == "book" %}
        <section class="structure extra-space section">
            <div class="container">
                <div class="row gy-4">
                    <h2 class="mb-0 text-center"><i class="bi bi-calendar2-week"></i> Modifica prenotazione</h2>
                    <hr/>
                    <div class="col-12">
                        <div class="item light-grey white position-relative border-top-0">
                            <h2 class="text-center"><strong>Attenzione</strong></h2>
                            <h6 class="text-center mb-4 mt-0">stai modificando la prenotazione per questo
                                corso
                            </h6>
                            <h2 class="text-center mb-0 mt-0">
                                <i class="bi {{ existing_booking.course.logo }}"></i> {{ existing_booking.course.name }}
                            </h2>
                            <h5 class="text-center m-2">
                                {{ existing_booking.schedule.start_date.strftime("%d/%m/%Y") }}
                                ore {{ existing_booking.schedule.start_time.strftime("%H:%M") }}
                            </h5>
                            <h5 class="text-center mt-3 pb-3 color-red">
                                Vuoi MODIFICARE la tua prenotazione con la nuova fascia oraria?
                            </h5>
                            <form method="POST" class="text-center">
                                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                                <input type="hidden" name="confirm" value="yes">
                                <button type="submit" class="btn btn-primary mb-2">Modifica la prenotazione
                                </button>
                                <a href="{{ url_for('courses') }}" class="btn btn-secondary mb-2">
                                    Annulla</a>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    {% endif %}

    {% if action == "cancel" %}
        <section class="structure extra-space section">
            <div class="container">
                <div class="row gy-4">
                    <h2 class="mb-0 text-center"><i class="bi bi-calendar2-week"></i> Cancella prenotazione</h2>
                    <hr/>
                    <div class="col-12">
                        <div class="item light-grey white position-relative border-top-0">
                            <h2 class="text-center"><strong>Attenzione</strong></h2>
                            <h6 class="text-center mb-4 mt-0">stai cancellando la tua prenotazione per il corso
                            </h6>
                            <h2 class="text-center mb-0 mt-0">
                                <i class="bi {{ existing_booking.course.logo }}"></i> {{ existing_booking.course.name }}
                            </h2>
                            <h5 class="text-center m-2">
                                {{ existing_booking.schedule.start_date.strftime("%d/%m/%Y") }}
                                ore {{ existing_booking.schedule.start_time.strftime("%H:%M") }}
                            </h5>
                            <h5 class="text-center mt-3 pb-3 color-red">
                                Vuoi cancellare la tua prenotazione?
                            </h5>
                            <form method="POST" class="text-center">
                                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                                <input type="hidden" name="confirm" value="yes">
                                <button type="submit" class="btn btn-danger mb-2">Cancella la prenotazione
                                </button>
                                <a href="{{ url_for('courses') }}" class="btn btn-secondary mb-2">
                                    Annulla</a>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    {% endif %}
{% endblock %}
